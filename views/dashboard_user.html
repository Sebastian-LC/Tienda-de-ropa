<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../static/style/style.css" />
    
    <title>Dashboard - JAANSTYLE</title>

    <!-- Conexión al CSS -->

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Librería de iconos -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Bootstrap JS (para el menú colapsable) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  </head>
  <body>
    <!-- Header -->
    <header>
        <nav class="navbar navbar-expand-lg">
  <div class="container-fluid">
    <!-- Logo a la izquierda -->
    <a class="navbar-brand d-flex align-items-center" href="#">
      <img src="/static/logo/logo.png" alt="JAANSTYLE">
      <span class="fw-bold">{user.username}</span>
    </a>

    <!-- Botón menú móvil -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" 
            data-bs-target="#navbarNav" aria-controls="navbarNav" 
            aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Links -->
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="mostrarSeccion('creacion-prenda')">Creación de prendas <i class="fa fa-tshirt"></i></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="mostrarSeccion('informes')">Informes <i class="fa fa-file-alt"></i></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="mostrarSeccion('consultas')"> Consultas<i class="fa fa-question-circle"></i></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="mostrarSeccion('perfil')">Perfil<i class="fa fa-user"></i></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="mostrarSeccion('carrito')">Carrito<i class="fa fa-shopping-cart"></i></a>
        </li>
      </ul>
      <!-- Iconos -->
      <div class="d-flex ms-3">
      </div>
    </div>
  </div>
</nav>
    


    <!-- Contenido -->
    <main class="content container my-4">
      <!-- Intro -->
      <section id="intro" class="intro p-3 rounded mb-3">
        <h2>Bienvenido</h2>
        <p>
          La venta de ropa personalizada ha sido una gran opción al mercado de
          hoy en día, ya que permite a los clientes expresar su estilo y
          personalidad de manera única. Por lo que la creación de una página web
          de venta de ropa personalizada es una gran idea para satisfacer las
          necesidades de las personas de hoy en día.
        </p>
      </section>

      

      <!-- Creación de Prenda -->
      <section id="creacion-prenda" class="p-3 rounded mb-3 d-none">
        <h2>Creación de Prenda</h2>
        <div id="prenda-error" class="alert alert-danger d-none" role="alert"></div>
        <div id="prenda-success" class="alert alert-success d-none" role="alert"></div>
        <form id="prenda-form">
          <!-- Nombre -->
          <div class="mb-3">
            <label for="nombre" class="form-label">Nombre de la prenda</label>
            <input type="text" id="nombre" name="nombre" class="form-control" required>
          </div>

          <!-- Prenda -->
          <div class="mb-3">
            <label for="id_prenda" class="form-label">Prenda</label>
            <select id="id_prenda" name="id_prenda" class="form-select" onchange="loadTiposPrenda(); updateSummary()" required>
              <option value="">Selecciona una prenda</option>
              <!-- loop prendas -->
              <option value="{item.id}">{item.nombre}</option>
              <!-- endloop -->
            </select>
          </div>

          <!-- Tipo de prenda -->
          <div class="mb-3">
            <label for="id_tipo_prenda" class="form-label">Tipo de prenda</label>
            <select id="id_tipo_prenda" name="id_tipo_prenda" class="form-select" onchange="updateSummary()" required>
              <option value="">Selecciona un tipo</option>
            </select>
          </div>

          <!-- Tela -->
          <div class="mb-3">
            <label for="id_tela" class="form-label">Tela</label>
            <select id="id_tela" name="id_tela" class="form-select" onchange="updateSummary()" required>
              <option value="">Selecciona una tela</option>
              <!-- loop telas -->
              <option value="{item.id}">{item.nombre}</option>
              <!-- endloop -->
            </select>
          </div>

          <!-- Estilo -->
          <div class="mb-3">
            <label for="id_estilo" class="form-label">Estilo</label>
            <select id="id_estilo" name="id_estilo" class="form-select" onchange="updateSummary()" required>
              <option value="">Selecciona un estilo</option>
              <!-- loop estilos -->
              <option value="{item.id}">{item.nombre}</option>
              <!-- endloop -->
            </select>
          </div>

          <!-- Molde -->
          <div class="mb-3">
            <label for="id_molde" class="form-label">Molde</label>
            <select id="id_molde" name="id_molde" class="form-select" onchange="updateSummary()" required>
              <option value="">Selecciona un molde</option>
              <!-- loop moldes -->
              <option value="{item.id}">{item.nombre}</option>
              <!-- endloop -->
            </select>
          </div>

          <!-- Resumen -->
          <div class="mb-3">
            <label class="form-label">Resumen de la prenda</label>
            <div id="prenda-summary" class="alert alert-info"></div>
          </div>

          <input type="hidden" id="descripcion" name="descripcion">

          <!-- Botón -->
          <button type="button" id="crear-prenda-btn">Crear Prenda</button>
        </form>
      </section>

      <!-- Informes -->
      <section id="informes" class="p-3 rounded mb-3 d-none">
        <h2>Informes</h2>
        <p>Aquí podrás visualizar el historial de tus prendas creadas.</p>

        <table class="table  table-hover text-center align-middle">
          <thead>
            <tr>
              <th>Fecha</th>
              <th>Prenda</th>
              <th>Estilo</th>
              <th>Tela</th>
              <th>Molde</th>
              <th>Descripción</th>
              <th>Estado</th>
            </tr>
          </thead>
          <tbody>
            <!-- loop products -->
            <tr>
              <td>{item.date}</td>
              <td>{item.prenda}</td>
              <td>{item.estilo}</td>
              <td>{item.tela}</td>
              <td>{item.molde}</td>
              <td>{item.descripcion}</td>
              <td>{item.estado}</td>
            </tr>
            <!-- endloop -->
          </tbody>
        </table>
      </section>

      <!-- Consultas -->
      <section id="consultas" class="p-3 rounded mb-3 d-none">
        <h2>Consultas</h2>
        <p>Si tienes alguna duda o necesitas ayuda, escríbenos aquí:</p>
        <div id="consulta-error" class="alert alert-danger d-none" role="alert"></div>
        <form id="consulta-form">
          <div class="mb-3">
            <label for="nombre" class="form-label">Nombre</label>
            <input
              type="text"
              id="nombre"
              class="form-control"
              placeholder="Escribe tu nombre"
            />
          </div>

          <div class="mb-3">
            <label for="email" class="form-label">Correo</label>
            <input
              type="email"
              id="email"
              class="form-control"
              placeholder="ejemplo@correo.com"
            />
          </div>

          <div class="mb-3">
            <label for="mensaje" class="form-label">Mensaje</label>
            <textarea
              id="mensaje"
              rows="4"
              class="form-control"
              placeholder="Escribe tu consulta"
            ></textarea>
          </div>

          <button type="submit">Enviar</button>
        </form>
      </section>

      <!-- Perfil -->
      <section id="perfil" class="p-3 rounded mb-3 d-none">
        <h2>Perfil</h2>
        <p>Aquí puedes gestionar tu información personal.</p>
      </section>

      <!-- Carrito -->
      <section id="carrito" class="p-3 rounded mb-3 d-none">
        <h2>Carrito</h2>
        <p>Contenido de tu carrito de compras.</p>
      </section>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-center py-3">
      <div class="social">
        <a href="#" class="text-light me-3">
          <i class="fa-brands fa-instagram"></i>
        </a>
        <a href="#" class="text-light">
          <i class="fa-brands fa-facebook"></i>
        </a>
      </div>
    </footer>
  <script src="/static/js/utils.js"></script>
  <script src="/static/js/user-dashboard.js"></script>
  <script>
    function mostrarSeccion(seccionId) {
      // Ocultar todas las secciones
      const secciones = document.querySelectorAll('main section');
      secciones.forEach(seccion => {
        seccion.classList.add('d-none');
      });
      // Mostrar la sección seleccionada
      const seccion = document.getElementById(seccionId);
      if (seccion) {
        seccion.classList.remove('d-none');
      }
    }

    const estilos = {
      'Camiseta': ['Manga larga', 'Manga corta', 'Sin mangas'],
      'Pantalón': ['Largo', 'Corto', 'Capri'],
      'Chaqueta': ['Con capucha', 'Sin capucha', 'Bomber'],
      'Sudadera': ['Con capucha', 'Sin capucha', 'Oversize']
    };

    function updateEstiloPrenda() {
      const tipo = document.getElementById('tipo-prenda').value;
      const div = document.getElementById('estilo-prenda-div');
      const select = document.getElementById('estilo-prenda');
      if (tipo === '') {
        div.style.display = 'none';
        select.innerHTML = '';
      } else {
        div.style.display = 'block';
        select.innerHTML = '<option value="">Selecciona un estilo</option>';
        estilos[tipo].forEach(estilo => {
          const option = document.createElement('option');
          option.value = estilo;
          option.textContent = estilo;
          select.appendChild(option);
        });
      }
    }
  </script>
  </body>
</html>
